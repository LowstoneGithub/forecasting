---
title: "forecasting"
output: html_document
date: "2024-03-13"
---
```{r}
#Install and load necessary packages
packages <- c("fpp3","knitr")
for (package in packages) {
  if (!requireNamespace(package, quietly = TRUE)) {
    install.packages(package)
  }
}
lapply(packages,library, character.only=T)
```

```{r}
yts_df <- read.csv("yts.csv")
```

```{r}
# Konvertieren von kategorischen Variablen in Faktoren
daten$Education_Level <- as.factor(daten$Education_Level)
daten$Geschlecht <- as.factor(daten$Geschlecht)
daten$US_State <- as.factor(daten$US_State)
```

```{r}
# Lineares Modell aufstellen
modell <- lm(Prävalenz ~ Education_Level + Zeit + Preis_von_Zigaretten + Ausgaben_für_Raucherkampagnen + Geschlecht + US_State, data = daten)

# Zusammenfassung des Modells anzeigen
summary(modell)
```

```{r}
#Clean dataframe
yts_df_new <- yts_df%>%
  filter(DataSource == "YTS", TopicDesc == c("Cigarette Use (Youth)","Smokeless Tobacco Use (Youth)"))
```

```{r}
#Time series
# Konvertieren Sie Ihre Daten in ein tsibble
# Assuming yts_df_new is the dataframe you are working with
# and you need to include additional variables to ensure uniqueness
yts_tsibble <- as_tsibble(yts_df_new, index = YEAR, key = names(yts_df_new)[!names(yts_df_new) %in% "YEAR"])

```

```{r}
yts_tsibble%>%
  summarise(meanPrev = mean(Data_Value, na.rm=T))%>%
  autoplot(meanPrev)
```




